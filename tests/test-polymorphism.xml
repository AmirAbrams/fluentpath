<?xml version="1.0" encoding="UTF-8"?>
<group name="Polymorphism">
    <!-- test(observation(), "Observation.value.unit", 1, "string"); -->
    <test name="testPolymorphismA"
        inputfile="observation-example.xml">
        <expression>Observation.value.unit</expression>
        <output type="string"></output>
    </test>
    
    <!-- testWrong(observation(), "Observation.valueQuantity.unit"); -->
    <test name="testPolymorphismB"
        inputfile="observation-example.xml">
        <expression invalid="true">Observation.valueQuantity.unit</expression>
    </test>
    
    <!-- testBoolean(observation(), "Observation.value.is(Quantity)", true); -->
    <test name="testPolymorphismIsA"
        inputfile="observation-example.xml">
        <expression>Observation.value.is(Quantity)</expression>
        <output type="boolean">true</output>
    </test>
    <!-- testBoolean(observation(), "Observation.value is Quantity", true); -->
    <test name="testPolymorphismIsA"
        inputfile="observation-example.xml">
        <expression>Observation.value is Quantity</expression>
        <output type="boolean">true</output>
    </test>

    <test name="testPolymorphismIsA"
        inputfile="questionnaire-example.xml">
        <expression>Questionnaire.contained.first() is ValueSet</expression>
        <output type="boolean">true</output>
    </test>
    
    <test name="testPolymorphismIsA"
        inputfile="observation-example.xml">
        <expression>Observation.id is id</expression>
        <output type="boolean">true</output>
    </test>
    
    <test name="testPolymorphismIsA"
        inputfile="patient-example.xml">
        <expression>Patient.birthDate is date</expression>
        <output type="boolean">true</output>
    </test>

    <!-- testBoolean(observation(), "Observation.value.is(Period).not()", true); -->
    <test name="testPolymorphismIsB"
        inputfile="observation-example.xml">
        <expression>Observation.value.is(Period).not()</expression>
        <output type="boolean">true</output>
    </test>
    
    <test name="testPolymorphismIsB"
        inputfile="questionnaire-example.xml">
        <expression>Questionnaire.contained.is(ValueSet).count()</expression>
        <output type="integer">1</output>
    </test>
    
    <!-- testBoolean(observation(), "Observation.value.as(Quantity).unit", true); -->
    <test name="testPolymorphismAsA"
        inputfile="observation-example.xml">
        <expression>Observation.value.as(Quantity).unit</expression>
        <output type="string">lbs</output>
    </test>
    <!-- testBoolean(observation(), "(Observation.value as Quantity).unit", true); -->
    <test name="testPolymorphismAsA"
        inputfile="observation-example.xml">
        <expression>(Observation.value as Quantity).unit</expression>
        <output type="string">lbs</output>
    </test>
    
    <!-- testWrong(observation(), "(Observation.value as Period).unit"); -->
    <test name="testPolymorphismAsB"
        inputfile="observation-example.xml">
        <expression invalid="true">(Observation.value as Period).unit</expression>
    </test>
    
    <!-- test(observation(), "Observation.value.as(Period).start", 0); -->
    <test name="testPolymorphismAsC"
        inputfile="observation-example.xml">
        <expression>Observation.value.as(Period).start</expression>
    </test>
</group>

